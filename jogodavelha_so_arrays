#include <stdio.h>

#define tam 3

int main(void){

    int i, j, num = 1, op, matriz[tam][tam], vitoria = 0, jogada = 1;
    char jogodavelha[tam][tam] = {' '};

    for (i = 0; i < tam; i++){
        for (j = 0; j < tam; j++){
            matriz[i][j] = num;
            num++;
        }
    }

    do {
        // Pede a jogada.
        if (vitoria != 1 && jogada <= 9){
            printf("Jogada %d\n", jogada);
            printf("Jogador X\n");
            printf("Com base nesta matriz escolha um local para jogar. Se 0 a posição está ocupada.\n");
                for (i = 0; i < tam; i++){
                    for (j = 0; j < tam; j++){
                        printf("%d ", matriz[i][j]);
                    }
                    printf("\n");
                }
                scanf("%d", &op); // Escolhe a posição.

        switch (op){
            case 1:
                jogodavelha[0][0] = 'X';
                matriz[0][0] = 0;
                if (jogodavelha[1][1] == 'X' && jogodavelha[2][2] == 'X'){
                    vitoria = 1;
                    printf("Vitoria do X na diagonal principal.\n");
                    } else if (jogodavelha[0][1] == 'X' && jogodavelha[0][2] == 'X'){
                        vitoria = 1;
                        printf("Vitoria do X na linha 1.\n");
                    } else if (jogodavelha[1][0] == 'X' && jogodavelha[2][0] == 'X'){
                        vitoria = 1;
                        printf("Vitoria do X na coluna 1.\n");
                    }
                break;
            case 2:
                jogodavelha[0][1] = 'X';
                matriz[0][1] = 0;
                if (jogodavelha[0][0] == 'X' && jogodavelha[0][2] == 'X'){
                    vitoria = 1;
                    printf("Vitoria do X na linha 1.\n");
                    } else if (jogodavelha[1][1] == 'X' && jogodavelha[2][1] == 'X'){
                    vitoria = 1;
                    printf("Vitoria do X na coluna 2.\n");
                    }
                break;
            case 3:
                jogodavelha[0][2] = 'X';
                matriz[0][2] = 0;
                if (jogodavelha[0][0] == 'X' && jogodavelha[0][1] == 'X'){
                    vitoria = 1;
                    printf("Vitoria do X na linha 1.\n");
                    } else if (jogodavelha[1][2] == 'X' && jogodavelha[2][2] == 'X'){
                    vitoria = 1;
                    printf("Vitoria do X na coluna 3.\n");
                    }
                break;
            case 4:
                jogodavelha[1][0] = 'X';
                matriz[1][0] = 0;
                if (jogodavelha[1][1] == 'X' && jogodavelha[1][2] == 'X'){
                    vitoria = 1;
                    printf("Vitoria do X na linha 2.\n");
                    } else if (jogodavelha[0][0] == 'X' && jogodavelha[2][0] == 'X'){
                        vitoria = 1;
                        printf("Vitoria do X na coluna 1.\n");
                    }
                    break;
                case 5:
                    jogodavelha[1][1] = 'X';
                    matriz[1][1] = 0;
                    if (jogodavelha[1][1] == 'X' && jogodavelha[2][2] == 'X'){
                        vitoria = 1;
                        printf("Vitoria do X na diagonal principal.\n");
                    }
                    else if (jogodavelha[0][2] == 'X' && jogodavelha[2][0] == 'X'){
                        vitoria = 1;
                        printf("Vitoria do X na diagonal secundaria.\n");
                    }
                    else if (jogodavelha[1][0] == 'X' && jogodavelha[1][2] == 'X'){
                        vitoria = 1;
                        printf("Vitoria do X na linha 2.\n");
                    }
                    else if (jogodavelha[0][1] == 'X' && jogodavelha[2][1] == 'X'){
                        vitoria = 1;
                        printf("Vitoria do X na coluna 2.\n");
                    }
                    break;
                case 6:
                    jogodavelha[1][2] = 'X';
                    matriz[1][2] = 0;
                    if (jogodavelha[1][0] == 'X' && jogodavelha[1][1] == 'X'){
                        vitoria = 1;
                        printf("Vitoria do X na linha 2.\n");
                    }
                    else if (jogodavelha[0][2] == 'X' && jogodavelha[2][2] == 'X'){
                        vitoria = 1;
                        printf("Vitoria do X na coluna 3.\n");
                    }
                    break;
                case 7:
                    jogodavelha[2][0] = 'X';
                    matriz[2][0] = 0;
                    if (jogodavelha[1][1] == 'X' && jogodavelha[0][2] == 'X'){
                        vitoria = 1;
                        printf("Vitoria do X na diagonal secundaria.\n");
                    }
                    else if (jogodavelha[2][1] == 'X' && jogodavelha[2][2] == 'X'){
                        printf("Vitoria do X na linha 2.\n");
                        vitoria = 1;
                    }
                    else if (jogodavelha[0][0] == 'X' && jogodavelha[1][0] == 'X'){
                        vitoria = 1;
                        printf("Vitoria do X na coluna 1.\n");
                    }
                    break;
                case 8:
                    jogodavelha[2][1] = 'X';
                    matriz[2][1] = 0;
                    if (jogodavelha[2][0] == 'X' && jogodavelha[2][2] == 'X'){
                        vitoria = 1;
                        printf("Vitoria do X na linha 2.\n");
                    }
                    else if (jogodavelha[0][1] == 'X' && jogodavelha[1][1] == 'X'){
                        vitoria = 1;
                        printf("Vitoria do X na coluna 2.\n");
                    }
                    break;
                case 9:
                    jogodavelha[2][2] = 'X';
                    matriz[2][2] = 0;
                    if (jogodavelha[0][0] == 'X' && jogodavelha[1][1] == 'X'){
                        vitoria = 1;
                        printf("Vitoria do X na diagonal principal.\n");
                    }
                    else if (jogodavelha[2][0] == 'X' && jogodavelha[2][1] == 'X'){
                        vitoria = 1;
                        printf("Vitoria do X na linha 3.\n");
                    }
                    else if (jogodavelha[0][2] == 'X' && jogodavelha[1][2] == 'X'){
                        vitoria = 1;
                        printf("Vitoria do X na coluna 3.\n");
                    }
                    break;
                default:
                    printf("Jogada invalida.\n");
                    break;
            }

        printf("Jogo atual\n");
            for (i = 0; i < tam; i++){
                for (j = 0; j < tam; j++){
                    printf("| %c ", jogodavelha[i][j]);
                }
                printf("|");
                printf("\n");
            }
            jogada++;
        }

        if (vitoria != 1 && jogada <= 9){
            printf("Jogada %d\n", jogada);
            printf("Jogador O\n");
            printf("Com base nesta matriz escolha um local para jogar. Se 0 a posição está ocupada.\n");
            for (i = 0; i < tam; i++){
                for (j = 0; j < tam; j++){
                    printf("%d ", matriz[i][j]);
                }
                printf("\n");
            }
            scanf("%d", &op); // Escolhe a posição.

switch (op){
                case 1:
                    jogodavelha[0][0] = 'O';
                    matriz[0][0] = 0;
                    if (jogodavelha[1][1] == 'O' && jogodavelha[2][2] == 'O'){
                        vitoria = 1;
                        printf("Vitoria do O na diagonal principal.\n");
                    } else if (jogodavelha[0][1] == 'O' && jogodavelha[0][2] == 'O'){
                        vitoria = 1;
                        printf("Vitoria do O na linha 1.\n");
                    } else if (jogodavelha[1][0] == 'O' && jogodavelha[2][0] == 'O'){
                        vitoria = 1;
                        printf("Vitoria do O na coluna 1.\n");
                    }
                    break;
                case 2:
                    jogodavelha[0][1] = 'O';
                    matriz[0][1] = 0;
                    if (jogodavelha[0][0] == 'O' && jogodavelha[0][2] == 'O'){
                        vitoria = 1;
                        printf("Vitoria do O na linha 1.\n");
                    } else if (jogodavelha[1][1] == 'O' && jogodavelha[2][1] == 'O'){
                        vitoria = 1;
                        printf("Vitoria do O na coluna 2.\n");
                    }
                    break;
                case 3:
                    jogodavelha[0][2] = 'O';
                    matriz[0][2] = 0;
                    if (jogodavelha[0][0] == 'O' && jogodavelha[0][1] == 'O'){
                        vitoria = 1;
                        printf("Vitoria do O na linha 1.\n");
                    } else if (jogodavelha[1][2] == 'O' && jogodavelha[2][2] == 'O'){
                        vitoria = 1;
                        printf("Vitoria do O na coluna 3.\n");
                    }
                    break;
                case 4:
                    jogodavelha[1][0] = 'O';
                    matriz[1][0] = 0;
                    if (jogodavelha[1][1] == 'O' && jogodavelha[1][2] == 'O'){
                        vitoria = 1;
                        printf("Vitoria do O na linha 2.\n");
                    } else if (jogodavelha[0][0] == 'O' && jogodavelha[2][0] == 'O'){
                        vitoria = 1;
                        printf("Vitoria do O na coluna 1.\n");
                    }
                    break;
                case 5:
                    jogodavelha[1][1] = 'O';
                    matriz[1][2] = 0;
                    if (jogodavelha[1][1] == 'O' && jogodavelha[2][2] == 'O'){
                        vitoria = 1;
                        printf("Vitoria do O na diagonal principal.\n");
                    } else if (jogodavelha[0][2] == 'O' && jogodavelha[2][0] == 'O'){
                        vitoria = 1;
                        printf("Vitoria do O na diagonal secundaria.\n");
                    } else if (jogodavelha[1][0] == 'O' && jogodavelha[1][2] == 'O'){
                        vitoria = 1;
                        printf("Vitoria do O na linha 2.\n");
                    } else if (jogodavelha[0][1] == 'O' && jogodavelha[2][1] == 'O'){
                        vitoria = 1;
                        printf("Vitoria do O na coluna 2.\n");
                    }
                    break;
                case 6:
                    jogodavelha[1][2] = 'O';
                    matriz[1][2] = 0;
                    if (jogodavelha[1][0] == 'O' && jogodavelha[1][1] == 'O'){
                        vitoria = 1;
                        printf("Vitoria do O na linha 2.\n");
                    } else if (jogodavelha[0][2] == 'O' && jogodavelha[2][2] == 'O'){
                        vitoria = 1;
                        printf("Vitoria do O na coluna 3.\n");
                    }
                    break;
                case 7:
                    jogodavelha[2][0] = 'O';
                    matriz[2][0] = 0;
                    if (jogodavelha[1][1] == 'O' && jogodavelha[0][2] == 'O'){
                        vitoria = 1;
                        printf("Vitoria do O na diagonal secundaria.\n");
                    } else if (jogodavelha[2][1] == 'O' && jogodavelha[2][2] == 'O'){
                        vitoria = 1;
                        printf("Vitoria do O na linha 2.\n");
                    } else if (jogodavelha[0][0] == 'O' && jogodavelha[1][0] == 'O'){
                        vitoria = 1;
                        printf("Vitoria do O na coluna 1.\n");
                    }
                    break;
                case 8:
                    jogodavelha[2][1] = 'O';
                    matriz[2][1] = 0;
                    if (jogodavelha[2][0] == 'O' && jogodavelha[2][2] == 'O'){
                        vitoria = 1;
                        printf("Vitoria do O na linha 2.\n");
                    } else if (jogodavelha[0][1] == 'O' && jogodavelha[1][1] == 'O'){
                        vitoria = 1;
                        printf("Vitoria do O na coluna 2.\n");
                    }
                    break;
                case 9:
                    jogodavelha[2][2] = 'O';
                    matriz[2][2] = 0;
                    if (jogodavelha[0][0] == 'O' && jogodavelha[1][1] == 'O'){
                        vitoria = 1;
                        printf("Vitoria do O na diagonal principal.\n");
                    } else if (jogodavelha[2][0] == 'O' && jogodavelha[2][1] == 'O'){
                        vitoria = 1;
                        printf("Vitoria do O na linha 3.\n");
                    } else if (jogodavelha[0][2] == 'O' && jogodavelha[1][2] == 'O'){
                        vitoria = 1;
                        printf("Vitoria do O na coluna 3.\n");
                    }
                    break;
                default:
                    printf("Jogada invalida.\n");
                    break;
            }

printf("Jogo atual\n");
            for (i = 0; i < tam; i++){
                for (j = 0; j < tam; j++){
                    printf("| %c ", jogodavelha[i][j]);
                }
                printf("|");
                printf("\n");
            }
            jogada++;
        }

        } while (vitoria != 1 && jogada <= 9);
    printf("Jogo Finalizado\n");
        for (i = 0; i < tam; i++){
            for (j = 0; j < tam; j++){
                printf("| %c ", jogodavelha[i][j]);
            }
            printf("|");
            printf("\n");
        }
}
